{% extends 'layout.html' %}

{% block body %}
## TODO: favourite ads
## TODO: javascript interraction, hide, manually expire ..
    {% if realities %}
    <div class="uk-child-width-1-3@s uk-child-width-1-2" uk-grid>

        {% for reality in realities %}

            <div class="uk-card uk-card-small uk-grid-collapse uk-margin flag-{{reality.flags|lower}}" uk-grid>
                <div class="uk-card-media-top uk-cover-container">
                    {% if reality.image %}
                        <img src="{{reality.image}}" alt="" uk-cover>
                        <canvas width="320" height="180"></canvas>
                    {% else %}
                        <img src="https://via.placeholder.com/600x400" alt="" uk-cover>
                        <canvas width="320" height="180"></canvas>
                    {% endif %}
                </div>
                <div>
                    <div class="uk-card-header uk-padding-remove-left uk-padding-remove-right">
                        <h5 class="uk-card-title" style="font-size:14pt;">
                            <a href="{{reality.url}}" target="_blank">{{reality.title}}</a>
                        </h5>
                    </div>
                    <div class="uk-card-body uk-padding-remove-left uk-padding-remove-right">
                        <div uk-grid>
                            <div><strong>{{ "{:,}".format(reality.price)}} Kč</strong></div>
                            <div>{{reality.date}}</div>
                        </div>

                        <div class="uk-card-badge uk-label">{{reality.viewed_count}}</div>
                        {% if reality.history|length<2 %}
                        <div class="uk-card-badge uk-label">New</div>

                        {% endif %}
                        <p>
                            {{reality.description}}...
                        </p>
                    </div>
                    <div class="uk-card-footer uk-padding-remove-left uk-padding-remove-right">
                        <strong>History</strong>
                        <br>
                        <div class="history">
                            {% if reality.history %}
                            <ul class="uk-list" style="font-size:10pt;">
                                {% for history in reality.history %}
                                    <li>{{history.update_datetime}}: {{"{:,} Kč".format(history.price)}}</li>
                                {% endfor %}
                            </ul>
                            {% else %}
                            <p>no history</p>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
    </div>
    {% endif %}
{% endblock %}
